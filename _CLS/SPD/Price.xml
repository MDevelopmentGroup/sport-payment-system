<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="SPD.Price">
<Super>%Persistent</Super>
<TimeCreated>63393,57121.285694</TimeCreated>

<Property name="TypeLesson">
<Type>SPD.TypeLesson</Type>
</Property>

<Property name="Cost">
<Type>%Float</Type>
</Property>

<Property name="DateActualStart">
<Type>%DateTime</Type>
</Property>

<Property name="DateActualEnd">
<Type>%DateTime</Type>
</Property>

<UDLText name="T">
<Content><![CDATA[
// Relationship Semester As SPD.Semester [ Cardinality = many, Inverse = Price ];??????????????

]]></Content>
</UDLText>

<Property name="school">
<Type>SPD.School</Type>
</Property>

<Property name="Actual">
<Type>%Boolean</Type>
<InitialExpression>1</InitialExpression>
</Property>

<Method name="Create">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set st=$$$OK
	try{
		$$$THROWONERROR(st,##class(%ZEN.Auxiliary.jsonProvider).%ConvertJSONToObject(%request.Content,,.obj,1))
		set typelesson=##class(SPD.TypeLesson).%OpenId(obj.IdtypeLesson)
		set price=##class(SPD.Price).%New()
		set price.Cost=obj.cost
		//допилить где-то было
		set price.DateActualEnd=""	//convert to %DateTime
	
		set price.DateActualEnd=price.DateActualEnd+obj.LongTime
	}
	catch ex{
		set st=ex
	}
	ret st
]]></Implementation>
</Method>

<Method name="Remove">
<ClassMethod>1</ClassMethod>
<FormalSpec>IdPrice</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set st=$$$OK
	try{
		
	}
	catch ex{
		
	}
	ret st
]]></Implementation>
</Method>

<Storage name="Default">
<Type>%Library.CacheStorage</Type>
<DataLocation>^SPD.PriceD</DataLocation>
<DefaultData>PriceDefaultData</DefaultData>
<IdLocation>^SPD.PriceD</IdLocation>
<IndexLocation>^SPD.PriceI</IndexLocation>
<StreamLocation>^SPD.PriceS</StreamLocation>
<ExtentSize>100000</ExtentSize>
<Data name="PriceDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>TypeLesson</Value>
</Value>
<Value name="3">
<Value>Cost</Value>
</Value>
<Value name="4">
<Value>DateActualStart</Value>
</Value>
<Value name="5">
<Value>DateActualEnd</Value>
</Value>
<Value name="6">
<Value>Semester</Value>
</Value>
<Value name="7">
<Value>school</Value>
</Value>
<Value name="8">
<Value>Actual</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
